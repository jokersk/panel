webpackJsonp([36],{HExf:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("vLgD");function a(e){return Object(n.a)({url:"https://undone.com/api/order/update",method:"post",data:e})}var c={name:"inlineEditTable",data:function(){return{list:null,listLoading:!0,listQuery:{page:1,limit:10}}},filters:{statusFilter:function(e){return{3:"success",4:"info",5:"danger"}[e]}},created:function(){this.getList()},methods:{getList:function(){var e,t=this;this.listLoading=!0,(e=this.listQuery,Object(n.a)({url:"https://undone.com/api/order/list/33770",method:"get",params:e})).then(function(e){console.log(e.data),t.list=e.data.orders.map(function(e){return t.$set(e,"edit",!1),e.showReceivedButton=!1,e.citychain&&e.citychain.received_at?e.hasReceived=!0:(e.hasReceived=!1,e.showReceivedButton=!0),e.originalCityId=e.citychain_id,e}),t.listLoading=!1})},cancelEdit:function(e){e.citychain_id=e.originalCityId,e.edit=!1,this.$message({message:"The CityChain Order Id has been restored to the original value",type:"warning"})},confirmEdit:function(e){var t=this;if(e.edit=!1,e.originalCityId=e.citychain_id,!e.citychain_id)return!1;a({undone_id:e.id,citychain_order_id:e.citychain_id}).then(function(i){e.citychain=i.data,t.$message({message:"CityChain Order Id has been edited",type:"success"})})},updateReceived:function(e){var t=this;e.hasReceived&&this.$confirm("Are you sure to set this?").then(function(i){a({undone_id:e.id,updateReceived:1}).then(function(i){i.data&&(e.citychain.received_at=i.data.received_at,e.showReceivedButton=!1),t.$message({message:"Update Success",type:"success"})})}).catch(function(t){e.hasReceived=!1})}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{width:"180px",align:"center",label:"DATE"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e._f("parseTime")(t.row.create_at,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"class-name":"status-col",label:"STATUS",width:"200","min-width":"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:e._f("statusFilter")(t.row.status)}},[e._v(e._s(t.row.OrderStatus))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"UNDONE ORDER ID",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.order_ref_id))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"190",label:"CITYCHAIN ORDER ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[i("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.citychain_id,callback:function(i){e.$set(t.row,"citychain_id",i)},expression:"scope.row.citychain_id"}}),e._v(" "),i("el-button",{staticClass:"cancel-btn",attrs:{size:"small",icon:"el-icon-refresh",type:"warning"},on:{click:function(i){e.cancelEdit(t.row)}}},[e._v("cancel")])]:i("span",[e._v(e._s(t.row.citychain_id))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"EMAIL",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.billing_email?i("span",[e._v(e._s(t.row.billing_email))]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"TELEPHONE",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.billing_telephone?i("span",[e._v(e._s(t.row.billing_telephone))]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"DELIVERY AT",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.citychain?i("span",[e._v(e._s(t.row.citychain.delivery_at))]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"RECEIVED",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showReceivedButton?i("el-switch",{on:{change:function(i){e.updateReceived(t.row)}},model:{value:t.row.hasReceived,callback:function(i){e.$set(t.row,"hasReceived",i)},expression:"scope.row.hasReceived"}}):e._e(),e._v(" "),t.row.citychain&&t.row.citychain.received_at?i("span",[e._v(e._s(t.row.citychain.received_at))]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"ACTIONS",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?i("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(i){e.confirmEdit(t.row)}}},[e._v("Ok")]):i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(e){t.row.edit=!t.row.edit}}},[e._v("Edit")])]}}])})],1)],1)},staticRenderFns:[]};var o=i("VU/8")(c,s,!1,function(e){i("XRgd")},"data-v-10d0d3fd",null);t.default=o.exports},XRgd:function(e,t,i){var n=i("mUqI");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("684f0dd2",n,!0)},mUqI:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"\n.edit-input[data-v-10d0d3fd] {\n  padding-right: 100px;\n}\n.cancel-btn[data-v-10d0d3fd] {\n  position: absolute;\n  right: 15px;\n  top: 10px;\n}\n",""])}});